
{% load static %}
<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link href-"{%static 'app/css/style.css' %}" rel="stylesheet" />
        <link href-"{%static 'app/css/owl.carousel.min.css' %}" rel="stylesheet" />
        <link href-"{%static 'app/css/all.min.css' %}" rel="stylesheet" />
        <link href-"{%static 'app/css/.css' %}" rel="stylesheet" />
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
        <script src="{%static 'app/js/all.min.js' %}" > </script>
        <script src="{%static 'app/js/myscript.js' %}" > </script>
        <script src="{%static 'app/js/s3.js' %}" > </script>
        <title>LamSan</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
          <div class="container-fluid">
              <a class="navbar-brand" href="#">
                  <img src="{% static 'app/images/treelogo.png' %}" width="55" height="55" />
              </a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                  <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                      <li class="nav-item">
                          <a class="nav-link active" aria-current="page" href="#">Trang Chủ</a>
                      </li>
                      <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                              Loại
                          </a>
                          <ul class="dropdown-menu">
                              <li><a class="dropdown-item" href="#">Gỗ</a></li>
                              <li><hr class="dropdown-divider"></li>
                              <li><a class="dropdown-item" href="#">Cây Xanh</a></li>
                              <li><hr class="dropdown-divider"></li>
                              <li><a class="dropdown-item" href="#">Gỗ Hiếm</a></li>
                          </ul>
                      </li>
                      <li class="nav-item" style="margin-right: 20px;">
                          <a class="nav-link" href="#">Thông tin</a>
                      </li>
                  </ul>
                  <form class="d-flex" role="search">
                      <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                      <a class="nav-link" >Tìm</a>
                  </form>
              </div>
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                          Loại
                      </a>
                      <ul class="dropdown-menu">
                          <li><a class="dropdown-item" href="#">Thông tin cá nhân </a></li>
                          <li><hr class="dropdown-divider"></li>
                          <li><a class="dropdown-item" href="#">Đăng xuất </a></li>
                      </ul>
                  </li>
                  <li class="nav-item ">
                      <button class="btn btn-outline-success" id ="connectButton" type="submit">Đăng Nhặp</button>
                  </li>
              </ul>
          </div>
      </nav>
      
        
          <!--Body-->
          {% block banner_slider %} {% endblock banner_slider %}
          {% block main-content %} {% endblock main-content %}
          {% block line-content %}{% endblock line-content %}
         <!-- footer_templae.html -->

         <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <style>
              body {
                  margin: 0;
                  padding: 0;
                  display: flex;
                  flex-direction: column;
                  min-height: 100vh;
                  background-color: #f2f2f2;
              }
      
              footer {
                  background-color: #d9d9d9;
                  padding: 20px;
                  margin-top: auto;
                  display: flex;
                  flex-wrap: wrap;
                  align-items: flex-start;
                  text-align: left;
              }
      
              .team {
                  font-size: 10px;
                  font-weight: bold;
                  margin-right: 20px;
                  margin-bottom: 10px;
                  border-right: 3px solid #666; /* Đường kẻ ngăn cách */
                  padding-right: 20px; /* Khoảng cách giữa tên nhóm và thành viên */
              }
      
              .member {
                  font-size: 9px;
                  margin-right: 20px;
                  margin-bottom: 10px;
              }
          </style>
          <title>Footer Example</title>
      </head>
      <body>
      
          <footer>
              <div>
                <div class="team" style="color: #3366cc;">Nhóm: Tên Nhóm</div>
              </div>
              <div>
                  <div class="member">TV1: Nguyễn Hoàng Linh: ID: 123</div>
                  <div class="member">TV2: Nguyễn Thái Dương: ID: 456</div>
                  <div class="member">TV3: Phan Thị Việt Nga: ID: 789</div>
              </div>
          </footer>
      
      </body>
        <script>
                let accounts;
                var walletAddress;
                var isconnect = false;
                window.addEventListener('load', function() {
                  if (typeof window.ethereum !== 'undefined') {
                      window.ethereum.request({ method: 'eth_requestAccounts' })
                      .then(accounts => {
                          const userAddress = accounts[0];
                          console.log('User Address:', userAddress);
                          connectButton.textContent = "Connected: "+ accounts[0].substring(0,6) + "..."; 
                          isconnect = true;
                          console.log('Account changed:', accounts[0]);
                          var dataToSend = {
                            key1: accounts[0],
                            // Thêm các trường dữ liệu khác nếu cần
                          };
                          $.ajax({
                            type: 'POST',
                            url: '/your-django-endpoint/',
                            contentType: 'application/json; charset=utf-8',
                            data: JSON.stringify(dataToSend),
                            success: function(response) {
                                console.log('Response from Django:', response);
                                // Xử lý phản hồi từ server nếu cần
                            },
                            error: function(error) {
                                console.error('Error sending request to Django:', error);
                            }
                          });
                      })
                      .catch(error => {
                          console.error('Error getting user accounts:', error);
                      });
                  }
                });
                function updateButtons() {
                    const connectButton = document.getElementById('connectButton');
                    
                    if (accounts) {
                        connectButton.textContent = "Connected: "+ walletAddress.substring(0,6) + "..."; 
                        isconnect = true;
                    } else {
                        connectButton.textContent = "Connected Wallet";
                        isconnect = false;
                    }
                }
                async function connect() {
                    if(!isconnect){
                      try {
                          // Request account access if needed
                          accounts = await ethereum.request({ method: 'eth_requestAccounts' });
                          walletAddress = accounts[0];
                          updateButtons();
                          console.log('Account changed:', accounts[0]);
                          var dataToSend = {
                            key1 : walletAddress,
                            // Thêm các trường dữ liệu khác nếu cần
                          };
                          $.ajax({
                            type: 'POST',
                            url: '/your-django-endpoint/',
                            contentType: 'application/json; charset=utf-8',
                            data: JSON.stringify(dataToSend),
                            success: function(response) {
                                console.log('Response from Django:', response);
                                // Xử lý phản hồi từ server nếu cần
                            },
                            error: function(error) {
                                console.error('Error sending request to Django:', error);
                            }
                          });
                      } catch (error) {
                      
                      }
                    }else{
                      accounts = undefined;
                      updateButtons();
                    }
                }
                document.getElementById('connectButton').addEventListener('click', connect);
                if (typeof window.ethereum !== 'undefined') {
                    const ethereum = window.ethereum;
                    const web3 = new Web3(ethereum);
                    // Listen for account changes
                    ethereum.on('accountsChanged', (newAccounts) => {
                        accounts = newAccounts.length > 0 ? newAccounts : undefined;
                        if (accounts) {
                            
                        } else {
                            console.log('MetaMask locked or account disconnected');
                            accounts = undefined;
                            updateButtons();
                        }
                    });
                } else {
                    console.error('MetaMask not installed');
                }
        </script>
    </body>
</html>